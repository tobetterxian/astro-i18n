---
import { type CollectionEntry, getCollection } from "astro:content";
import { startsWithLanguages, type Lang } from "../../../i18n";
import QuotePage from "../../../components/QuotePage.astro";

interface Props {
  quote: CollectionEntry<"quotes">;
}

export async function getStaticPaths() {
  return (await getCollection("quotes"))
    .filter((quote) => startsWithLanguages(quote.id))
    .map((quote) => {
      const [lang, ...slug] = quote.id.split("/");
      return {
        params: { locale: lang as Lang, id: slug.join("/") || undefined },
        props: { quote },
      };
    });
}

const { locale } = Astro.params;
const { quote } = Astro.props;
---

<QuotePage quote={quote} locale={locale} />

---
import { type CollectionEntry, getCollection } from "astro:content";
import {
  defaultLang,
  startsWithLanguage,
  startsWithLanguages,
  stripLangPrefix,
} from "../../i18n";
import QuotePage from "../../components/QuotePage.astro";

interface Props {
  quote: CollectionEntry<"quotes">;
}

export async function getStaticPaths() {
  return (await getCollection("quotes"))
    .filter(
      (quote) =>
        !startsWithLanguages(quote.id) ||
        startsWithLanguage(quote.id, defaultLang)
    )
    .map((quote) => ({
      params: { id: stripLangPrefix(quote.id) },
      props: { quote },
    }));
}

const { quote } = Astro.props;
---

<QuotePage quote={quote} locale={defaultLang} />
